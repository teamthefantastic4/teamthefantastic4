<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">

    <title>Hospitalization Prediction</title>
</head>
<body>

    <div class="container">
        <header >Caring for Yourself</header>
        <h4>Hospitalization Prediction</h4>
        
        <form action="/" method="post" id="myForm">
            <div class="form first">
                <div class="details personal">
                    <span class="title">Personal Details</span>
    
                    <div class="fields">

                        <!--agey -->
                        <div class="input-field">
                            <label>Age</label>
                            <select name="agey">
                                <option value=0 selected disabled>Select an option</option>
                                <option value=4>50 - 60</option>
                                <option value=3>61 - 70</option>
                                <option value=2>71 - 80</option>
                                <option value=1>Above 80</option>
                            </select>
                        </div>

                        <!--ragender -->
                        <div class="input-field">
                            <label>Gender Assigned at Birth</label>
                            <select name="gender">
                                <option value=0 selected disabled>Select an option</option>
                                <option value=1>Male</option>
                                <option value=2>Female</option>
                            </select>
                        </div>                        

                        <!--momage -->
                        <div class="input-field">
                            <label>Mother's Age (current/at the moment of death)</label>
                            <select name="momage">
                                <option value=0 selected disabled>Select an option</option>
                                <option value=4>18 to 30</option>
                                <option value=3>31 to 60</option>
                                <option value=2>61 to 90</option>
                                <option value=1>More than 91</option>
                            </select>
                        </div>

                        <!--dadage -->
                        <div class="input-field">
                            <label>Father's Age (current/at the moment of death)</label>
                            <select name="dadage">
                                <option value=0 selected disabled>Select an option</option>
                                <option value=4>18 to 30</option>
                                <option value=3>31 to 60</option>
                                <option value=2>61 to 90</option>
                                <option value=1>More than 91</option>
                            </select>
                        </div>

                        <!--livsib-->
                        <div class="input-field">
                            <label>Number of Living Siblings</label>
                            <select name="livsib">
                                <option value=0 selected disabled>Select an option</option>
                                <option value=1>I don't have</option>
                                <option value=2>1</option>
                                <option value=3>2</option>
                                <option value=4>3</option>
                                <option value=5>4</option>
                                <option value=6>5</option>
                                <option value=7>More than 6</option>
                            </select>
                        </div>

                        <!--grchild-->
                        <div class="input-field">
                            <label>Number of Grandchildren</label>
                            <select name="grchild">
                                <option value=0 selected disabled>Select an option</option>
                                <option value=1>I dont have</option>
                                <option value=2>1</option>
                                <option value=3>2</option>
                                <option value=4>3</option>
                                <option value=5>4</option>
                                <option value=6>5</option>
                                <option value=7>More than 6</option>
                            </select>

                        </div>

                        <!--shlt-->
                        <div class="input-field">
                            <label>How do you perceive you general health?</label>
                            <select name="shlt">
                                <option value=0 selected disabled>Select an option</option>
                                <option value=1>Excellent</option>
                                <option value=2>Very Good</option>
                                <option value=3>Good</option>
                                <option value=4>Fair</option>
                                <option value=5>Poor</option>
                            </select>
                        </div>

                        <!--vscan-->
                        <div class="input-field">
                            <label>Do You Have Vision Problems?</label>
                            <select name="vscan">
                                <option value=0 selected disabled>Select an option</option>
                                <option value=0.1>No</option>
                                <option value=1>Yes</option>
                            </select>
                        </div>
                        
                        <!-- cholst -->
                        <div class="input-field">
                            <label>Do you Have Abnormal Cholesterol Levels?</label>
                            <select name="cholst">
                                <option value=0 selected disabled>Select an option</option>
                                <option value=0.1>No</option>
                                <option value=1>Yes</option>
                            </select>
                        </div>

                        <!--weight-->
                        <div class="input-field">
                            <label>Weight (Kilograms)</label>
                            <select name=n10>
                                <option value=0 selected disabled>Select an option</option>
                                <option value=4>Below 50</option>
                                <option value=3>50 To 60</option>
                                <option value=2>61 To 70</option>
                                <option value=1>71 To 80</option>
                            </select>
                        </div>

                        <!--height-->
                        <div class="input-field">
                            <label>Height (Meters)</label>
                            <select name="height">
                                <option value=0 selected disabled>Select an option</option>
                                <option value=5>Below 1.50</option>
                                <option value=4>1.50 To 1.60</option>
                                <option value=3>1.61 To 1.70</option>
                                <option value=2>1.71 To 1.80</option>
                                <option value=1>Above 1.80</option>
                            </select>
                        </div>

                        <!--bmi-->
                        <div class="input-field">
                            <label>Body Mass Index ( W / (H * H) )</label>
                            <select name="bmi">
                                <option value=0 selected disabled>Select an option</option>
                                <option value=18>Below 18.5</option>
                                <option value=23>18.5 To 24.9</option>
                                <option value=27>25 To 29.9</option>
                                <option value=33>30 To 34.9</option>
                            </select>
                        </div>

                        <!--mobila -->           
                        <div class="input-field">
                            <label>Describe Your Mobility</label>
                            <select name="mobila">
                                <option value=0 selected disabled>Select an option</option>
                                <option value=1>Excellent</option>
                                <option value=2>Very good</option>
                                <option value=3>Good</option>
                                <option value=4>Fair</option>
                                <option value=5>Poor</option>
                            </select>
                        </div>

                        <!--grossaa -->           
                        <div class="input-field">
                            <label>Describe Your Gross Motor Skills (biking, climbing, jumping)</label>
                            <select name="grossaa">
                                <option value=0 selected disabled>Select an option</option>
                                <option value=1>Excellent</option>
                                <option value=2>Very good</option>
                                <option value=3>Good</option>
                                <option value=4>Fair</option>
                                <option value=5>Poor</option>
                            </select>
                        </div>

                        <!-- adltot_m -->
                        <div class="input-field">
                            <label>Do You Have Difficulty in Performing Daily Activities?</label>
                            <select name="adltot_m">
                                <option value=0 selected disabled>Select an option</option>
                                <option value=1>No</option>
                                <option value=2>Yes</option>
                                <option value=4>Sometimes</option>
                            </select>
                        </div>

                        <!-- walkra -->
                        <div class="input-field">
                            <label>Do You Have Difficulty in Walking Across a Room?</label>
                            <select name="walkra">
                                <option value=0 selected disabled>Select an option</option>
                                <option value=0.1 class="opt1">No</option>
                                <option value=1   class="opt2">Yes</option>
                            </select>
                        </div>

                        <!-- walksa -->
                        <div class="input-field">
                            <label>How Much Difficulty Do You Have in Walking Several Blocks?</label>
                            <select name="walksa">
                                <option value=0 selected disabled>Select an option</option>
                                <option value=1>Very Little Difficulty</option>
                                <option value=2>Moderate Difficulty</option>
                                <option value=3>Considerable Difficulty</option>
                                <option value=4>Severe Difficulty</option>
                            </select>
                        </div>

                        <!-- push -->
                        <div class="input-field">
                            <label>How Much Difficulty Do You Have in Pushing and/or Pulling Large Objects?</label>
                            <select name="push">
                                <option value=0 selected disabled>Select an option</option>
                                <option value=1>Very Little Difficulty</option>
                                <option value=2>Moderate Difficulty</option>
                                <option value=3>Considerable Difficulty</option>
                                <option value=4>Severe Difficulty</option>
                            </select>
                        </div>

                        <!-- lift -->
                        <div class="input-field">
                            <label>How Much Difficulty Do You Have in Lifting +5 Kgs?</label>
                            <select name="lift">
                                <option value=0 selected disabled>Select an option</option>
                                <option value=1>Very Little Difficulty</option>
                                <option value=2>Moderate Difficulty</option>
                                <option value=3>Considerable Difficulty</option>
                                <option value=4>Severe Difficulty</option>
                            </select>
                        </div>

                        <!--fallinj -->
                        <div class="input-field">
                            <label>Do You Have Injures from Previous Falls?</label>
                            <select name="fallinj">
                                <option value=0 selected disabled>Select an option</option>
                                <option value=0.1>No</option>
                                <option value=1>Yes</option>
                            </select>
                        </div>

                        <!--hip_m -->
                        <div class="input-field">
                            <label>In The Last Two Years, Have You Had Any Serious Fracture?</label>
                            <select name="hip_m">
                                <option value=0 selected disabled>Select an option</option>
                                <option value=0.1>No</option>
                                <option value=1>Yes</option>
                            </select>
                        </div>

                        <!-- hrtatte -->
                        <div class="input-field">
                            <label>Have You Ever Had a Heart Attack?</label>
                            <select name="hrtatte">
                                <option value=0 selected disabled>Select an option</option>
                                <option value=0.1>No</option>
                                <option value=1>Yes</option>
                            </select>
                        </div>
                        
                        <!-- rxdiabi -->
                        <div class="input-field">
                            <label>Do You Take Medication to Treat Diabetes?</label>
                            <select name="rxdiabi">
                                <option value=0 selected disabled>Select an option</option>
                                <option value=0.1>No</option>
                                <option value=1>Yes</option>
                            </select>
                        </div>

                        <!-- "rxhrtat" -->
                        <div class="input-field">
                            <label>Do You Take Medication to Prevent Heart Attacks?</label>
                            <select name="rxhrtat">
                                <option value=0 selected disabled>Select an option</option>
                                <option value=0.1>No</option>
                                <option value=1>Yes</option>
                            </select>
                        </div>

                        <!-- "rxstrok" -->
                        <div class="input-field">
                            <label>Do You Take Medication to Prevent Strokes?</label>
                            <select name="rxstrok">
                                <option value=0 selected disabled>Select an option</option>
                                <option value=0.1>No</option>
                                <option value=1>Yes</option>
                            </select>
                        </div>

                        <!-- "rxhibp" -->
                        <div class="input-field">
                            <label>Do You Take Medication to Treat High Blood Pressure?</label>
                            <select name="rxhibp">
                                <option value=0 selected disabled>Select an option</option>
                                <option value=0.1>No</option>
                                <option value=1>Yes</option>
                            </select>
                        </div>

                        <!-- "rxarthr" -->
                        <div class="input-field">
                            <label>Do You Take Medication to Treat Arthritis?</label>
                            <select name="rxarthr">
                                <option value=0 selected disabled>Select an option</option>
                                <option value=0.1>No</option>
                                <option value=1>Yes</option>
                            </select>
                        </div>

                        <!-- "rxlung_m" -->
                        <div class="input-field">
                            <label>Do You Take Medication to Treat Lung Diseases?</label>
                            <select name="rxlung_m">
                                <option value=0 selected disabled>Select an option</option>
                                <option value=0.1>No</option>
                                <option value=1>Yes</option>
                            </select>
                        </div>

                        <!-- "cncrsurg" -->
                        <div class="input-field">
                            <label>Have You Had Surgery to Treat Cancer?</label>
                            <select name="cncrsurg">
                                <option value=0 selected disabled>Select an option</option>
                                <option value=0.1>No</option>
                                <option value=1>Yes</option>
                            </select>
                        </div>
                        
                        <div class="buttons">
                            <div class="resetBtn" id="resetButton">
                                <span class="btnText">Reset Form</span>
                            </div>
    
                            <button class="resultBtn" type="button" id="submitBtn">
                                <span class="btnText">My Result</span>
                            </button>
                        </div>

                    </div>
                </div>
            </div>

            <!---RESULT PAGE-->
            <div class="form second">
                <div class="details personal">
                    
                    <div class="diagnosis">
                        <label class="labelPredict" id="predictLabel"></label><br>
                        <span class="predictText" id="predictTxt"></span><br>
                        <label class="labelScore" id="scoreLabel"></label><br>
                        <span class="scoreText" id="scoreTxt"></span>
                    </div>

                    
                    <div class="fields">
                        <div class="buttons">
                            <div class="backBtn" id="backButton">
                                <span class="btnText">Back to Form</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
    <script>
        $(document).ready(function () {

            $("#backButton").click(function () {
                            $(".form.first").show();
                            $(".form.second").show();
            })

            $("#submitBtn").click(function () {

            // Get the form data
                var formData = $("#myForm").serialize();

        // Make the AJAX request to the server
                $.ajax({
                    type: "POST",
                    url: "/", // The path of the POST view
                    data: formData,
                    success: function (data) {
                        // Show the results and hide the form
                        $(".form.first").hide();
                        $(".form.second").show();

                        if(data.success == false){
                            $("#predictTxt").text(data.prediction);
                        }
                        else {
                            $("#predictLabel").text(data.prediction_label)
                            $("#predictTxt").text(data.prediction);
                            $("#scoreLabel").text(data.score_label)
                            $("#scoreTxt").text(data.score);
                        }
                    },
                    error: function (data) {
                        alert("Error attempting a request.");
                    },
                });
            });
        });
    </script>
</body>
</html>