<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">

    <title>Hospitalization Prediction</title>
</head>
<body>

    <div class="container">
        <header >Caring for Yourself</header>
        <h4>Hospitalization Prediction</h4>
        
        <form action="/" method="post" id="myForm">
            <div class="form first">
                <div class="details personal">
                    <span class="title">Personal Details</span>
    
                    <div class="fields">
          
                        <!--agey -->
                        <div class="input-field">
                            <label>Age</label>
                            <input type="number" value=0 min=0 name="agey" placeholder="Fill this field">
                        </div>

                        <!--ragender -->
                        <div class="input-field">
                            <label>Gender Assigned at Birth</label>
                            <select name="gender">
                                <option name="gender1" value=0 selected>Select an option</option>
                                <option name="gender2" value=1>Male</option>
                                <option name="gender3" value=2>Female</option>
                            </select>
                        </div>                        

                        <!--momage -->
                        <div class="input-field">
                            <label>Mother's Age (current/at the moment of death)</label>
                            <input type="number" value=0 min=0 name="momage" placeholder="Fill this field">
                        </div>

                        <!--dadage -->
                        <div class="input-field">
                            <label>Father's Age (current/at the moment of death)</label>
                            <input type="number" value=0 min=0 name="dadage" placeholder="Fill this field">
                        </div>
                        
                        <!--livsib-->
                        <div class="input-field">
                            <label>Number of Living Siblings</label>
                            <select name="livsib">
                                <option name="livsib1" value=0 selected>Select an option</option>
                                <option name="livsib2" value=1 >1</option>
                                <option name="livsib3" value=2 >2</option>
                                <option name="livsib4" value=3 >3</option>
                                <option name="livsib5" value=4 >4 or More</option>
                            </select>
                        </div>

                        <!--grchild-->
                        <div class="input-field">
                            <label>Number of Grandchildren</label>
                            <select name="grchild">
                                <option name="grchild1" value=0 selected>Select an option</option>
                                <option name="grchild2" value=1> 1</option>
                                <option name="grchild3" value=2> 2</option>
                                <option name="grchild4" value=3> 3</option>
                                <option name="grchild5" value=4> 4</option>
                            </select>

                        </div>

                        <!--shlt-->
                        <div class="input-field">
                            <label>How do you perceive you general health?</label>
                            <select name="shlt">
                                <option name="shlt1" value=0 selected>Select an option</option>
                                <option name="shlt2" value=1 >Excellent</option>
                                <option name="shlt3" value=2 >Very Good</option>
                                <option name="shlt4" value=3 >Good</option>
                                <option name="shlt5" value=4 >Fair</option>
                                <option name="shlt6" value=5 >Poor</option>
                            </select>
                        </div>

                        <!--vscan-->
                        <div class="input-field">
                            <label>Do You Have Vision Problems? Rate 0 a 60 </label>
                            <select name="vscan">
                                <option name="vscan1" value=0 selected>Select an option</option>
                                <option name="vscan2" value=7.5 >0 a 15</option>
                                <option name="vscan3" value=22.5>16 a 30</option>
                                <option name="vscan4" value=37.5>31 a 45</option>
                                <option name="vscan5" value=52.5>46 a 60</option>
                            </select>
                        </div>
                        
                        <!-- cholst -->
                        <div class="input-field">
                            <label>Do you Have Abnormal Cholesterol Levels?</label>
                            <select name="cholst">
                                <option name="cholst1" value=0 selected>Select an option</option>
                                <option name="cholst2" value=0.1>No</option>
                                <option name="cholst3" value=1>Yes</option>
                            </select>
                        </div>

                        <!--weight-->
                        <div class="input-field">
                            <label>Weight (Kilograms)</label>
                            <input type="number" value=0 min=0 name="weight" placeholder="Fill this field">
                        </div>

                        <!--height-->
                        <div class="input-field">
                            <label>Height (Meters)</label>
                            <input type="number" value=0 min=0 name="height" placeholder="Fill this field">
                        </div>

                        <!--bmi-->
                        <div class="input-field">
                            <label>Body Mass Index ( W / (H * H) )</label>
                            <input type="number" value=0 min=0 name="bmi" placeholder="Fill this field">
                        </div>

                        <!--mobila -->           
                        <div class="input-field">
                            <label>Describe Your Mobility</label>
                            <select name="mobila">
                                <option name="mobila1" value=0 selected>Select an option</option>
                                <option name="mobila2" value=1>Excellent</option>
                                <option name="mobila3" value=2>Very good</option>
                                <option name="mobila4" value=3>Good</option>
                                <option name="mobila5" value=4>Fair</option>
                                <option name="mobila6" value=5>Poor</option>
                            </select>
                        </div>

                        <!--grossaa -->           
                        <div class="input-field">
                            <label>Difficulty with Gross Motor Skills (biking, climbing, jumping)</label>
                            <select name="grossaa">
                                <option name="grossaa1" value=0  selected>Select an option</option>
                                <option name="grossaa2" value=0.1 >No</option>
                                <option name="grossaa3" value=1   >Yes</option>
                            </select>
                        </div>

                        <!-- adltot_m -->
                        <div class="input-field">
                            <label>Do You Have Difficulty in Performing Daily Activities?</label>
                            <select name="adltot_m">
                                <option name="adltot_m1" value=0 selected>Select an option</option>
                                <option name="adltot_m2" value=0.1>No</option>
                                <option name="adltot_m3" value=1>  Yes</option>
                            </select>
                        </div>

                        <!-- walkra -->
                        <div class="input-field">
                            <label>Do You Have Difficulty in Walking Across a Room?</label>
                            <select name="walkra">
                                <option name="walkra1" value=0 selected>Select an option</option>
                                <option name="walkra2" value=0.1 class="opt1">No</option>
                                <option name="walkra3" value=1   class="opt2">Yes</option>
                            </select>
                        </div>

                        <!-- walksa -->
                        <div class="input-field">
                            <label>Do You Have Difficulty in Walking Several Blocks?</label>
                            <select name="walksa">
                                <option name="walksa1" value=0 selected>Select an option</option>
                                <option name="walksa2" value=0.1>No</option>
                                <option name="walksa3" value=1>Yes</option>
                            </select>
                        </div>

                        <!-- push -->
                        <div class="input-field">
                            <label>Difficulty in Pushing and/or Pulling Large Objects?</label>
                            <select name="push">
                                <option name="push1" value=0 selected>Select an option</option>
                                <option name="push2" value=0.1>No</option>
                                <option name="push3" value=1  >Yes</option>                                
                            </select>
                        </div>

                        <!-- lift -->
                        <div class="input-field">
                            <label>Difficulty Do You Have in Lifting +5 Kgs?</label>
                            <select name="lift">
                                <option name="lift1" value=0 selected>Select an option</option>
                                <option name="lift2" value=0.1>No</option>
                                <option name="lift3" value=1>Yes</option>
                            </select>
                        </div>

                        <!--fallinj -->
                        <div class="input-field">
                            <label>Do You Have Injures from Previous Falls?</label>
                            <select name="fallinj">
                                <option name="fallinj1" value=0 selected>Select an option</option>
                                <option name="fallinj2" value=0.1>No</option>
                                <option name="fallinj3" value=1>Yes</option>
                            </select>
                        </div>

                        <!--hip_m -->
                        <div class="input-field">
                            <label>In The Last Two Years, Have You Had Any Serious Fracture?</label>
                            <select name="hip_m">
                                <option name="hip_m1" value=0 selected>Select an option</option>
                                <option name="hip_m2" value=0.1>No</option>
                                <option name="hip_m3" value=1>Yes</option>
                            </select>
                        </div>

                        <!-- hrtatte -->
                        <div class="input-field">
                            <label>Have You Ever Had a Heart Attack?</label>
                            <select name="hrtatte">
                                <option name="hrtatte1" value=0 selected>Select an option</option>
                                <option name="hrtatte2" value=0.1>No</option>
                                <option name="hrtatte3" value=1>Yes</option>
                            </select>
                        </div>
                        
                        <!-- rxdiabi -->
                        <div class="input-field">
                            <label>Do You Take Medication to Treat Diabetes?</label>
                            <select name="rxdiabi">
                                <option name="rxdiabi1" value=0 selected>Select an option</option>
                                <option name="rxdiabi2" value=0.1>No</option>
                                <option name="rxdiabi3" value=1>Yes</option>
                            </select>
                        </div>

                        <!-- "rxhrtat" -->
                        <div class="input-field">
                            <label>Do You Take Medication to Prevent Heart Attacks?</label>
                            <select name="rxhrtat">
                                <option name="rxhrtat1" value=0 selected>Select an option</option>
                                <option name="rxhrtat2" value=0.1>No</option>
                                <option name="rxhrtat3" value=1>Yes</option>
                            </select>
                        </div>

                        <!-- "rxstrok" -->
                        <div class="input-field">
                            <label>Do You Take Medication to Prevent Strokes?</label>
                            <select name="rxstrok">
                                <option name="rxstrok1" value=0 selected>Select an option</option>
                                <option name="rxstrok2" value=0.1>No</option>
                                <option name="rxstrok3" value=1>Yes</option>
                            </select>
                        </div>

                        <!-- "rxhibp" -->
                        <div class="input-field">
                            <label>Do You Take Medication to Treat High Blood Pressure?</label>
                            <select name="rxhibp">
                                <option name="rxhibp1" value=0 selected>Select an option</option>
                                <option name="rxhibp2" value=0.1>No</option>
                                <option name="rxhibp3" value=1>Yes</option>
                            </select>
                        </div>

                        <!-- "rxarthr" -->
                        <div class="input-field">
                            <label>Do You Take Medication to Treat Arthritis?</label>
                            <select name="rxarthr">
                                <option name="rxarthr1" value=0 selected>Select an option</option>
                                <option name="rxarthr2" value=0.1>No</option>
                                <option name="rxarthr3" value=1>Yes</option>
                            </select>
                        </div>

                        <!-- "rxlung_m" -->
                        <div class="input-field">
                            <label>Do You Take Medication to Treat Lung Diseases?</label>
                            <select name="rxlung_m">
                                <option name="rxlung_m1" value=0 selected>Select an option</option>
                                <option name="rxlung_m2" value=0.1>No</option>
                                <option name="rxlung_m3" value=1>Yes</option>
                            </select>
                        </div>

                        <!-- "cncrsurg" -->
                        <div class="input-field">
                            <label>Have You Had Surgery to Treat Cancer?</label>
                            <select name="cncrsurg">
                                <option name="cncrsurg1" value=0 selected>Select an option</option>
                                <option name="cncrsurg2" value=0.1>No</option>
                                <option name="cncrsurg3" value=1>Yes</option>
                            </select>
                        </div>
                        
                        <div class="buttons">
                            <div class="resetBtn" id="resetButton">
                                <span class="btnText">Reset Form</span>
                            </div>
    
                            <button class="resultBtn" type="button" id="submitBtn">
                                <span class="btnText">My Result</span>
                            </button>
                        </div>

                    </div>
                </div>
            </div>

            <!---RESULT PAGE-->
            <div class="form second">
                <div class="details personal">
                    
                    <div class="diagnosis">
                        <label class="labelPredict" id="predictLabel"></label><br>
                        <span class="predictText" id="predictTxt"></span><br>
                        <label class="labelScore" id="scoreLabel"></label><br>
                        <span class="scoreText" id="scoreTxt"></span>
                    </div>

                    
                    <div class="fields">
                        <div class="buttons">
                            <div class="backBtn" id="backButton">
                                <span class="btnText">Back to Form</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
    <script>
        $(document).ready(function () {

            $("#backButton").click(function () {
                            $(".form.first").show();
                            $(".form.second").show();
            })

            $("#submitBtn").click(function () {

            // Get the form data
                var formData = $("#myForm").serialize();

        // Make the AJAX request to the server
                $.ajax({
                    type: "POST",
                    url: "/", // The path of the POST view
                    data: formData,
                    success: function (data) {
                        // Show the results and hide the form
                        $(".form.first").hide();
                        $(".form.second").show();
                    
                        $("#predictLabel").text(data.prediction_label)
                        $("#predictTxt").text(data.prediction);
                        $("#scoreLabel").text(data.score_label)
                        $("#scoreTxt").text(data.score);
                        
                    },
                    error: function (data) {
                        $("#predictLabel").text(data.prediction_label)
                        $("#predictTxt").text(data.prediction);
                        $("#scoreLabel").text(data.score_label)
                        $("#scoreTxt").text(data.score);
                    },
                });
            });
        });
    </script>
</body>
</html>